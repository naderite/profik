{"version":3,"names":["_Hooks","require","EventType","exports","useAnimatedGestureHandler","handlers","dependencies","context","doDependenciesDiffer","useWeb","useHandler","handler","e","event","nativeEvent","state","BEGAN","onStart","ACTIVE","onActive","oldState","END","onEnd","FAILED","onFail","CANCELLED","onCancel","onFinish","useEvent"],"sources":["useAnimatedGestureHandler.ts"],"sourcesContent":["import { MutableRefObject } from 'react';\nimport { Context, WorkletFunction } from '../commonTypes';\nimport WorkletEventHandler from '../WorkletEventHandler';\nimport { DependencyList } from './commonTypes';\nimport { useEvent, useHandler } from './Hooks';\n\ninterface Handler<T, TContext extends Context> extends WorkletFunction {\n  (event: T, context: TContext, isCanceledOrFailed?: boolean): void;\n}\n\nexport interface GestureHandlers<T, TContext extends Context> {\n  [key: string]: Handler<T, TContext> | undefined;\n  onStart?: Handler<T, TContext>;\n  onActive?: Handler<T, TContext>;\n  onEnd?: Handler<T, TContext>;\n  onFail?: Handler<T, TContext>;\n  onCancel?: Handler<T, TContext>;\n  onFinish?: Handler<T, TContext>;\n}\n\nexport enum EventType {\n  UNDETERMINED = 0,\n  FAILED,\n  BEGAN,\n  CANCELLED,\n  ACTIVE,\n  END,\n}\n\nexport interface GestureHandlerStateChangeNativeEvent {\n  handlerTag: number;\n  numberOfPointers: number;\n  state: EventType;\n  oldState: EventType;\n}\n\nexport interface GestureHandlerEvent<T>\n  extends GestureHandlerStateChangeNativeEvent {\n  nativeEvent: T;\n}\n\nexport function useAnimatedGestureHandler<\n  T extends GestureHandlerEvent<T>,\n  TContext extends Context\n>(\n  handlers: GestureHandlers<T, TContext>,\n  dependencies?: DependencyList\n): MutableRefObject<WorkletEventHandler<T> | null> | ((e: T) => void) {\n  const { context, doDependenciesDiffer, useWeb } = useHandler<T, TContext>(\n    handlers,\n    dependencies\n  );\n\n  const handler = (e: T) => {\n    'worklet';\n    const event = useWeb ? e.nativeEvent : e;\n\n    if (event.state === EventType.BEGAN && handlers.onStart) {\n      handlers.onStart(event, context);\n    }\n    if (event.state === EventType.ACTIVE && handlers.onActive) {\n      handlers.onActive(event, context);\n    }\n    if (\n      event.oldState === EventType.ACTIVE &&\n      event.state === EventType.END &&\n      handlers.onEnd\n    ) {\n      handlers.onEnd(event, context);\n    }\n    if (\n      event.oldState === EventType.BEGAN &&\n      event.state === EventType.FAILED &&\n      handlers.onFail\n    ) {\n      handlers.onFail(event, context);\n    }\n    if (\n      event.oldState === EventType.ACTIVE &&\n      event.state === EventType.CANCELLED &&\n      handlers.onCancel\n    ) {\n      handlers.onCancel(event, context);\n    }\n    if (\n      (event.oldState === EventType.BEGAN ||\n        event.oldState === EventType.ACTIVE) &&\n      event.state !== EventType.BEGAN &&\n      event.state !== EventType.ACTIVE &&\n      handlers.onFinish\n    ) {\n      handlers.onFinish(\n        event,\n        context,\n        event.state === EventType.CANCELLED || event.state === EventType.FAILED\n      );\n    }\n  };\n\n  if (useWeb) {\n    return handler;\n  }\n\n  return useEvent<T>(\n    handler,\n    ['onGestureHandlerStateChange', 'onGestureHandlerEvent'],\n    doDependenciesDiffer\n  );\n}\n"],"mappings":";;;;;;;AAIA,IAAAA,MAAA,GAAAC,OAAA;AAA+C,IAgBnCC,SAAS,0BAATA,SAAS;EAATA,SAAS,CAATA,SAAS;EAATA,SAAS,CAATA,SAAS;EAATA,SAAS,CAATA,SAAS;EAATA,SAAS,CAATA,SAAS;EAATA,SAAS,CAATA,SAAS;EAATA,SAAS,CAATA,SAAS;EAAA,OAATA,SAAS;AAAA;AAAAC,OAAA,CAAAD,SAAA,GAAAA,SAAA;AAqBd,SAASE,yBAAyBA,CAIvCC,QAAsC,EACtCC,YAA6B,EACuC;EACpE,MAAM;IAAEC,OAAO;IAAEC,oBAAoB;IAAEC;EAAO,CAAC,GAAG,IAAAC,iBAAU,EAC1DL,QAAQ,EACRC,YAAY,CACb;EAED,MAAMK,OAAO,GAAIC,CAAI,IAAK;IACxB,SAAS;;IACT,MAAMC,KAAK,GAAGJ,MAAM,GAAGG,CAAC,CAACE,WAAW,GAAGF,CAAC;IAExC,IAAIC,KAAK,CAACE,KAAK,KAAKb,SAAS,CAACc,KAAK,IAAIX,QAAQ,CAACY,OAAO,EAAE;MACvDZ,QAAQ,CAACY,OAAO,CAACJ,KAAK,EAAEN,OAAO,CAAC;IAClC;IACA,IAAIM,KAAK,CAACE,KAAK,KAAKb,SAAS,CAACgB,MAAM,IAAIb,QAAQ,CAACc,QAAQ,EAAE;MACzDd,QAAQ,CAACc,QAAQ,CAACN,KAAK,EAAEN,OAAO,CAAC;IACnC;IACA,IACEM,KAAK,CAACO,QAAQ,KAAKlB,SAAS,CAACgB,MAAM,IACnCL,KAAK,CAACE,KAAK,KAAKb,SAAS,CAACmB,GAAG,IAC7BhB,QAAQ,CAACiB,KAAK,EACd;MACAjB,QAAQ,CAACiB,KAAK,CAACT,KAAK,EAAEN,OAAO,CAAC;IAChC;IACA,IACEM,KAAK,CAACO,QAAQ,KAAKlB,SAAS,CAACc,KAAK,IAClCH,KAAK,CAACE,KAAK,KAAKb,SAAS,CAACqB,MAAM,IAChClB,QAAQ,CAACmB,MAAM,EACf;MACAnB,QAAQ,CAACmB,MAAM,CAACX,KAAK,EAAEN,OAAO,CAAC;IACjC;IACA,IACEM,KAAK,CAACO,QAAQ,KAAKlB,SAAS,CAACgB,MAAM,IACnCL,KAAK,CAACE,KAAK,KAAKb,SAAS,CAACuB,SAAS,IACnCpB,QAAQ,CAACqB,QAAQ,EACjB;MACArB,QAAQ,CAACqB,QAAQ,CAACb,KAAK,EAAEN,OAAO,CAAC;IACnC;IACA,IACE,CAACM,KAAK,CAACO,QAAQ,KAAKlB,SAAS,CAACc,KAAK,IACjCH,KAAK,CAACO,QAAQ,KAAKlB,SAAS,CAACgB,MAAM,KACrCL,KAAK,CAACE,KAAK,KAAKb,SAAS,CAACc,KAAK,IAC/BH,KAAK,CAACE,KAAK,KAAKb,SAAS,CAACgB,MAAM,IAChCb,QAAQ,CAACsB,QAAQ,EACjB;MACAtB,QAAQ,CAACsB,QAAQ,CACfd,KAAK,EACLN,OAAO,EACPM,KAAK,CAACE,KAAK,KAAKb,SAAS,CAACuB,SAAS,IAAIZ,KAAK,CAACE,KAAK,KAAKb,SAAS,CAACqB,MAAM,CACxE;IACH;EACF,CAAC;EAED,IAAId,MAAM,EAAE;IACV,OAAOE,OAAO;EAChB;EAEA,OAAO,IAAAiB,eAAQ,EACbjB,OAAO,EACP,CAAC,6BAA6B,EAAE,uBAAuB,CAAC,EACxDH,oBAAoB,CACrB;AACH"}